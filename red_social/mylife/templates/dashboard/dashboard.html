<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% load humanize %}
    {% load crispy_forms_tags %}
    <link type="text/css" rel="stylesheet" href="{% static 'css/fontello.css' %}">
    <link type="text/css" rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link type="text/css" rel="stylesheet" href="{% static 'css/messages.css' %}">
    <link type="text/css" rel="stylesheet" href="{% static 'css/google_font.css' %}">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>


    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>My Lif3</title>
</head>



{% if request.user.profile.tipo_permiso == 'Administrador' %}


<body id="body-pd" class="body">
  {% include 'dashboard/menu_dashboard.html' %}  

  <div class="container-fluid" style="margin-top: 100px;">

    {% include 'messages/dash_success.html' %}

    <div class="container-fluid mt-5 mb-3">
        <div class="row">
            <div class="col-md-3">
                <div class="card p-3 mb-2" id="cartas_dash" >
                    <div class="d-flex justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <div class="icon"> <i class="icon-user"></i> </div>
                            <div class="ms-2 c-details">
                                <h6 class="mb-0">Usuarios</h6> <span>My Lif3</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-5">
                        <h6 class="heading">Usuarios Totales<br>( {{users.count}} )</h6>
                        <div class="mt-4" >
                            <div class="progress" id="barra_progreso">
                                <div class="progress-bar" role="progressbar" style="width: {{users.count}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 mb-2" id="cartas_dash">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <div class="icon"> <i class="icon-upload"></i> </div>
                            <div class="ms-2 c-details">
                                <h6 class="mb-0">Publicaciones</h6> <span>My Lif3</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-5">
                        <h6 class="heading">Publicaciones Totales<br>( {{posts.count}} )</h6>
                        <div class="mt-4">
                            <div class="progress" id="barra_progreso">
                                <div class="progress-bar" role="progressbar" style="width: {{posts.count}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 mb-2" id="cartas_dash">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <div class="icon"> <i class="icon-comment-inv"></i> </div>
                            <div class="ms-2 c-details">
                                <h6 class="mb-0">Comentarios</h6> <span>My Lif3</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-5">
                        <h6 class="heading">Comentarios Totales <br>( {{comments.count}} )</h6>
                        <div class="mt-4">
                            <div class="progress" id="barra_progreso">
                                <div class="progress-bar" role="progressbar" style="width: {{comments.count}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 mb-2" id="cartas_dash">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex flex-row align-items-center">
                            <div class="icon"> <i class="icon-reply-2"></i> </div>
                            <div class="ms-2 c-details">
                                <h6 class="mb-0">Respuestas</h6> <span>My Lif3</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-5">
                        <h6 class="heading">Respuestas Totales <br>( {{answers.count}} )</h6>
                        <div class="mt-4">
                            <div class="progress" id="barra_progreso">
                                <div class="progress-bar" role="progressbar" style="width: {{answers.count}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>

    <div class="table-responsive table-borderless">
        <table class="table">
            <thead class="thead">
                <tr>
                    <th>#</th>
                    <th>Img</th>
                    <th>Usuario</th>
                    <th>Tiempo</th>    
                    <th>Acciones</th>
                </tr>
            </thead>
            {% for post in posts %}
            <tbody class="table-body">
                <tr class="cell-2">
                    <td>{{post.id}}</td>
                    <td><img src="{{ post.user.profile.foto_perfil.url}}" width="42" height="42" style="border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.9);" class="img-circle" alt=""></td>
                    
                    {% if post.user.profile.tipo_verificacion == 'Verificado' %}
                    <td>{{post.user.username}}<i class="icon-ok-circle" id="icon_verifique"></i></td>
                    {% else %}
                    <td>{{post.user.username}}</td>
                    
                    {% endif%}
                    <td>{{post.fecha_creacion|naturaltime}}</td>
        
                    <td>  <div class="btn-group">
                      <a href="{% url 'comentarios' post.pk %}" class="btn btn-primary" id="editar" title="Ver Publicación"><span class="icon-upload"></span></a>
                      <a href="{% url 'eliminar_post_dashboard' post.id %}"  class="btn btn-primary" id="eliminar" title="Eliminar Publicación" onClick="return confirm('¿ Seguro qué quieres eliminar a esta publicación ?');"><span class="icon-trash"></span></a>
                    </div>
                  </td>   
                </tr>
            </tbody>
            {% endfor %}
        </table>
      </div>
      <br>
  </div>

</body>
{% else %}
  {% include 'error/error404.html' %}
{% endif %}
</html>